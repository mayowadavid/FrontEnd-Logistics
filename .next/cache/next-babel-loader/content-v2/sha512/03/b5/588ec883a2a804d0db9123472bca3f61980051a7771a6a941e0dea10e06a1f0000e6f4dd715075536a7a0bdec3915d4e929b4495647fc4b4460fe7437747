{"ast":null,"code":"import _regeneratorRuntime from \"H:/G4 Logistics/FrontEnd/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"H:/G4 Logistics/FrontEnd/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"H:/G4 Logistics/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useContext } from 'react';\nimport { ClientContext } from '../context/ClientContext';\nimport { store } from '../firebase';\n\nvar useStorage = function useStorage(image) {\n  _s();\n\n  var _useContext = useContext(ClientContext),\n      setError = _useContext.setError,\n      setUrl = _useContext.setUrl,\n      setProgress = _useContext.setProgress,\n      progress = _useContext.progress,\n      url = _useContext.url,\n      error = _useContext.error;\n\n  useEffect(function () {\n    // references\n    var storageRef = store.ref(\"profileimages/\".concat(image.name));\n    storageRef.put(image).on('state_changed', function (snap) {\n      var percentage = snap.bytesTransferred / snap.totalBytes * 100;\n      setProgress(percentage);\n    }, function (err) {\n      setError(err);\n    }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var url;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return storageRef.getDownloadURL();\n\n            case 2:\n              url = _context.sent;\n              setUrl(_objectSpread({}, url));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n  }, [image]);\n  return {\n    progress: progress,\n    url: url,\n    error: error\n  };\n};\n\n_s(useStorage, \"ew0Gka8HIqu8CkCOibpRbZDWoqo=\");\n\nexport default useStorage;","map":{"version":3,"sources":["H:/G4 Logistics/FrontEnd/components/fireBase/storageHook.js"],"names":["useState","useEffect","useContext","ClientContext","store","useStorage","image","setError","setUrl","setProgress","progress","url","error","storageRef","ref","name","put","on","snap","percentage","bytesTransferred","totalBytes","err","getDownloadURL"],"mappings":";;;;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAAQC,KAAR,QAAoB,aAApB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAAA;;AAAA,oBACkCJ,UAAU,CAACC,aAAD,CAD5C;AAAA,MACrBI,QADqB,eACrBA,QADqB;AAAA,MACXC,MADW,eACXA,MADW;AAAA,MACHC,WADG,eACHA,WADG;AAAA,MACUC,QADV,eACUA,QADV;AAAA,MACoBC,GADpB,eACoBA,GADpB;AAAA,MACyBC,KADzB,eACyBA,KADzB;;AAG5BX,EAAAA,SAAS,CAAC,YAAM;AACd;AACA,QAAMY,UAAU,GAAGT,KAAK,CAACU,GAAN,yBAA2BR,KAAK,CAACS,IAAjC,EAAnB;AAGAF,IAAAA,UAAU,CAACG,GAAX,CAAeV,KAAf,EAAsBW,EAAtB,CAAyB,eAAzB,EAA0C,UAACC,IAAD,EAAU;AAClD,UAAIC,UAAU,GAAID,IAAI,CAACE,gBAAL,GAAwBF,IAAI,CAACG,UAA9B,GAA4C,GAA7D;AACAZ,MAAAA,WAAW,CAACU,UAAD,CAAX;AACD,KAHD,EAGG,UAACG,GAAD,EAAS;AACVf,MAAAA,QAAQ,CAACe,GAAD,CAAR;AACD,KALD,wEAKG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACiBT,UAAU,CAACU,cAAX,EADjB;;AAAA;AACKZ,cAAAA,GADL;AAEDH,cAAAA,MAAM,mBAAKG,GAAL,EAAN;;AAFC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KALH;AAUD,GAfQ,EAeN,CAACL,KAAD,CAfM,CAAT;AAmBA,SAAO;AAAEI,IAAAA,QAAQ,EAARA,QAAF;AAAYC,IAAAA,GAAG,EAAHA,GAAZ;AAAiBC,IAAAA,KAAK,EAALA;AAAjB,GAAP;AACD,CAvBD;;GAAMP,U;;AAyBN,eAAeA,UAAf","sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { ClientContext } from '../context/ClientContext';\r\nimport {store} from '../firebase';\r\n\r\nconst useStorage = (image) => {\r\n  const {setError, setUrl, setProgress, progress, url, error} = useContext(ClientContext);\r\n\r\n  useEffect(() => {\r\n    // references\r\n    const storageRef = store.ref(`profileimages/${image.name}`);\r\n   \r\n    \r\n    storageRef.put(image).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(percentage);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n      setUrl({...url});\r\n     \r\n    });\r\n  }, [image]);\r\n\r\n  \r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;"]},"metadata":{},"sourceType":"module"}